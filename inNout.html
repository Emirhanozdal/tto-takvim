<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Yönetim Paneli - TTO Takvim</title>
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <style>
        body { background-color: #f0f2f5; font-family: sans-serif; }
        .message-box { display: none; text-align: center; margin-top: 20vh; color: #333; }
    </style>
</head>
<body>
    <div id="message-box" class="message-box">
        <h1>İşlem Tamamlandı</h1>
        <p>Bu pencereyi şimdi kapatabilirsiniz. Ana takvim sayfası otomatik olarak güncellenecektir.</p>
    </div>
    <script>
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on('init', user => {
                if (!user) {
                    window.netlifyIdentity.open(); // Giriş yapılmamışsa paneli aç
                } else {
                    window.netlifyIdentity.open(); // Zaten giriş yapılmışsa da paneli aç (örn: çıkış yapmak için)
                }
            });
            window.netlifyIdentity.on('login', () => {
                document.getElementById('message-box').style.display = 'block';
                window.netlifyIdentity.close();
            });
            window.netlifyIdentity.on('logout', () => {
                window.close();
            });
            window.netlifyIdentity.on('close', () => {
                // Eğer kullanıcı giriş yapmadan paneli kapatırsa, pencereyi de kapat
                if (!window.netlifyIdentity.currentUser()) {
                    window.close();
                }
            });
        }
    </script>
</body>
</html>
